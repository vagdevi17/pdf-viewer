{"ast":null,"code":"'use client';\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport mergeRefs from 'merge-refs';\nimport invariant from 'tiny-invariant';\nimport warning from 'warning';\nimport * as pdfjs from 'pdfjs-dist';\nimport StructTree from '../StructTree.js';\nimport usePageContext from '../shared/hooks/usePageContext.js';\nimport { cancelRunningTask, getDevicePixelRatio, isCancelException, makePageCallback } from '../shared/utils.js';\nconst ANNOTATION_MODE = pdfjs.AnnotationMode;\nexport default function Canvas(props) {\n  const pageContext = usePageContext();\n  invariant(pageContext, 'Unable to find Page context.');\n  const mergedProps = Object.assign(Object.assign({}, pageContext), props);\n  const {\n    _className,\n    canvasBackground,\n    devicePixelRatio = getDevicePixelRatio(),\n    onRenderError: onRenderErrorProps,\n    onRenderSuccess: onRenderSuccessProps,\n    page,\n    renderForms,\n    renderTextLayer,\n    rotate,\n    scale\n  } = mergedProps;\n  const {\n    canvasRef\n  } = props;\n  invariant(page, 'Attempted to render page canvas, but no page was specified.');\n  const canvasElement = useRef(null);\n  /**\r\n   * Called when a page is rendered successfully.\r\n   */\n  function onRenderSuccess() {\n    if (!page) {\n      // Impossible, but TypeScript doesn't know that\n      return;\n    }\n    if (onRenderSuccessProps) {\n      onRenderSuccessProps(makePageCallback(page, scale));\n    }\n  }\n  /**\r\n   * Called when a page fails to render.\r\n   */\n  function onRenderError(error) {\n    if (isCancelException(error)) {\n      return;\n    }\n    warning(false, error.toString());\n    if (onRenderErrorProps) {\n      onRenderErrorProps(error);\n    }\n  }\n  const renderViewport = useMemo(() => page.getViewport({\n    scale: scale * devicePixelRatio,\n    rotation: rotate\n  }), [devicePixelRatio, page, rotate, scale]);\n  const viewport = useMemo(() => page.getViewport({\n    scale,\n    rotation: rotate\n  }), [page, rotate, scale]);\n  // biome-ignore lint/correctness/useExhaustiveDependencies: Ommitted callbacks so they are not called every time they change\n  useEffect(function drawPageOnCanvas() {\n    if (!page) {\n      return;\n    }\n    // Ensures the canvas will be re-rendered from scratch. Otherwise all form data will stay.\n    page.cleanup();\n    const {\n      current: canvas\n    } = canvasElement;\n    if (!canvas) {\n      return;\n    }\n    canvas.width = renderViewport.width;\n    canvas.height = renderViewport.height;\n    canvas.style.width = `${Math.floor(viewport.width)}px`;\n    canvas.style.height = `${Math.floor(viewport.height)}px`;\n    canvas.style.visibility = 'hidden';\n    const renderContext = {\n      annotationMode: renderForms ? ANNOTATION_MODE.ENABLE_FORMS : ANNOTATION_MODE.ENABLE,\n      canvasContext: canvas.getContext('2d', {\n        alpha: false\n      }),\n      viewport: renderViewport\n    };\n    if (canvasBackground) {\n      renderContext.background = canvasBackground;\n    }\n    const cancellable = page.render(renderContext);\n    const runningTask = cancellable;\n    cancellable.promise.then(() => {\n      canvas.style.visibility = '';\n      onRenderSuccess();\n    }).catch(onRenderError);\n    return () => cancelRunningTask(runningTask);\n  }, [canvasBackground, page, renderForms, renderViewport, viewport]);\n  const cleanup = useCallback(() => {\n    const {\n      current: canvas\n    } = canvasElement;\n    /**\r\n     * Zeroing the width and height cause most browsers to release graphics\r\n     * resources immediately, which can greatly reduce memory consumption.\r\n     */\n    if (canvas) {\n      canvas.width = 0;\n      canvas.height = 0;\n    }\n  }, []);\n  useEffect(() => cleanup, [cleanup]);\n  return _jsx(\"canvas\", {\n    className: `${_className}__canvas`,\n    dir: \"ltr\",\n    ref: mergeRefs(canvasRef, canvasElement),\n    style: {\n      display: 'block',\n      userSelect: 'none'\n    },\n    children: renderTextLayer ? _jsx(StructTree, {}) : null\n  });\n}","map":{"version":3,"names":["jsx","_jsx","useCallback","useEffect","useMemo","useRef","mergeRefs","invariant","warning","pdfjs","StructTree","usePageContext","cancelRunningTask","getDevicePixelRatio","isCancelException","makePageCallback","ANNOTATION_MODE","AnnotationMode","Canvas","props","pageContext","mergedProps","Object","assign","_className","canvasBackground","devicePixelRatio","onRenderError","onRenderErrorProps","onRenderSuccess","onRenderSuccessProps","page","renderForms","renderTextLayer","rotate","scale","canvasRef","canvasElement","error","toString","renderViewport","getViewport","rotation","viewport","drawPageOnCanvas","cleanup","current","canvas","width","height","style","Math","floor","visibility","renderContext","annotationMode","ENABLE_FORMS","ENABLE","canvasContext","getContext","alpha","background","cancellable","render","runningTask","promise","then","catch","className","dir","ref","display","userSelect","children"],"sources":["C:/Users/VAGDEVI/OneDrive/Desktop/Pdf Viewer/pdf-viewer/node_modules/react-pdf/dist/esm/Page/Canvas.js"],"sourcesContent":["'use client';\r\nimport { jsx as _jsx } from \"react/jsx-runtime\";\r\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\r\nimport mergeRefs from 'merge-refs';\r\nimport invariant from 'tiny-invariant';\r\nimport warning from 'warning';\r\nimport * as pdfjs from 'pdfjs-dist';\r\nimport StructTree from '../StructTree.js';\r\nimport usePageContext from '../shared/hooks/usePageContext.js';\r\nimport { cancelRunningTask, getDevicePixelRatio, isCancelException, makePageCallback, } from '../shared/utils.js';\r\nconst ANNOTATION_MODE = pdfjs.AnnotationMode;\r\nexport default function Canvas(props) {\r\n    const pageContext = usePageContext();\r\n    invariant(pageContext, 'Unable to find Page context.');\r\n    const mergedProps = Object.assign(Object.assign({}, pageContext), props);\r\n    const { _className, canvasBackground, devicePixelRatio = getDevicePixelRatio(), onRenderError: onRenderErrorProps, onRenderSuccess: onRenderSuccessProps, page, renderForms, renderTextLayer, rotate, scale, } = mergedProps;\r\n    const { canvasRef } = props;\r\n    invariant(page, 'Attempted to render page canvas, but no page was specified.');\r\n    const canvasElement = useRef(null);\r\n    /**\r\n     * Called when a page is rendered successfully.\r\n     */\r\n    function onRenderSuccess() {\r\n        if (!page) {\r\n            // Impossible, but TypeScript doesn't know that\r\n            return;\r\n        }\r\n        if (onRenderSuccessProps) {\r\n            onRenderSuccessProps(makePageCallback(page, scale));\r\n        }\r\n    }\r\n    /**\r\n     * Called when a page fails to render.\r\n     */\r\n    function onRenderError(error) {\r\n        if (isCancelException(error)) {\r\n            return;\r\n        }\r\n        warning(false, error.toString());\r\n        if (onRenderErrorProps) {\r\n            onRenderErrorProps(error);\r\n        }\r\n    }\r\n    const renderViewport = useMemo(() => page.getViewport({ scale: scale * devicePixelRatio, rotation: rotate }), [devicePixelRatio, page, rotate, scale]);\r\n    const viewport = useMemo(() => page.getViewport({ scale, rotation: rotate }), [page, rotate, scale]);\r\n    // biome-ignore lint/correctness/useExhaustiveDependencies: Ommitted callbacks so they are not called every time they change\r\n    useEffect(function drawPageOnCanvas() {\r\n        if (!page) {\r\n            return;\r\n        }\r\n        // Ensures the canvas will be re-rendered from scratch. Otherwise all form data will stay.\r\n        page.cleanup();\r\n        const { current: canvas } = canvasElement;\r\n        if (!canvas) {\r\n            return;\r\n        }\r\n        canvas.width = renderViewport.width;\r\n        canvas.height = renderViewport.height;\r\n        canvas.style.width = `${Math.floor(viewport.width)}px`;\r\n        canvas.style.height = `${Math.floor(viewport.height)}px`;\r\n        canvas.style.visibility = 'hidden';\r\n        const renderContext = {\r\n            annotationMode: renderForms ? ANNOTATION_MODE.ENABLE_FORMS : ANNOTATION_MODE.ENABLE,\r\n            canvasContext: canvas.getContext('2d', { alpha: false }),\r\n            viewport: renderViewport,\r\n        };\r\n        if (canvasBackground) {\r\n            renderContext.background = canvasBackground;\r\n        }\r\n        const cancellable = page.render(renderContext);\r\n        const runningTask = cancellable;\r\n        cancellable.promise\r\n            .then(() => {\r\n            canvas.style.visibility = '';\r\n            onRenderSuccess();\r\n        })\r\n            .catch(onRenderError);\r\n        return () => cancelRunningTask(runningTask);\r\n    }, [canvasBackground, page, renderForms, renderViewport, viewport]);\r\n    const cleanup = useCallback(() => {\r\n        const { current: canvas } = canvasElement;\r\n        /**\r\n         * Zeroing the width and height cause most browsers to release graphics\r\n         * resources immediately, which can greatly reduce memory consumption.\r\n         */\r\n        if (canvas) {\r\n            canvas.width = 0;\r\n            canvas.height = 0;\r\n        }\r\n    }, []);\r\n    useEffect(() => cleanup, [cleanup]);\r\n    return (_jsx(\"canvas\", { className: `${_className}__canvas`, dir: \"ltr\", ref: mergeRefs(canvasRef, canvasElement), style: {\r\n            display: 'block',\r\n            userSelect: 'none',\r\n        }, children: renderTextLayer ? _jsx(StructTree, {}) : null }));\r\n}\r\n"],"mappings":"AAAA,YAAY;;AACZ,SAASA,GAAG,IAAIC,IAAI,QAAQ,mBAAmB;AAC/C,SAASC,WAAW,EAAEC,SAAS,EAAEC,OAAO,EAAEC,MAAM,QAAQ,OAAO;AAC/D,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,SAAS,MAAM,gBAAgB;AACtC,OAAOC,OAAO,MAAM,SAAS;AAC7B,OAAO,KAAKC,KAAK,MAAM,YAAY;AACnC,OAAOC,UAAU,MAAM,kBAAkB;AACzC,OAAOC,cAAc,MAAM,mCAAmC;AAC9D,SAASC,iBAAiB,EAAEC,mBAAmB,EAAEC,iBAAiB,EAAEC,gBAAgB,QAAS,oBAAoB;AACjH,MAAMC,eAAe,GAAGP,KAAK,CAACQ,cAAc;AAC5C,eAAe,SAASC,MAAMA,CAACC,KAAK,EAAE;EAClC,MAAMC,WAAW,GAAGT,cAAc,CAAC,CAAC;EACpCJ,SAAS,CAACa,WAAW,EAAE,8BAA8B,CAAC;EACtD,MAAMC,WAAW,GAAGC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEH,WAAW,CAAC,EAAED,KAAK,CAAC;EACxE,MAAM;IAAEK,UAAU;IAAEC,gBAAgB;IAAEC,gBAAgB,GAAGb,mBAAmB,CAAC,CAAC;IAAEc,aAAa,EAAEC,kBAAkB;IAAEC,eAAe,EAAEC,oBAAoB;IAAEC,IAAI;IAAEC,WAAW;IAAEC,eAAe;IAAEC,MAAM;IAAEC;EAAO,CAAC,GAAGd,WAAW;EAC5N,MAAM;IAAEe;EAAU,CAAC,GAAGjB,KAAK;EAC3BZ,SAAS,CAACwB,IAAI,EAAE,6DAA6D,CAAC;EAC9E,MAAMM,aAAa,GAAGhC,MAAM,CAAC,IAAI,CAAC;EAClC;AACJ;AACA;EACI,SAASwB,eAAeA,CAAA,EAAG;IACvB,IAAI,CAACE,IAAI,EAAE;MACP;MACA;IACJ;IACA,IAAID,oBAAoB,EAAE;MACtBA,oBAAoB,CAACf,gBAAgB,CAACgB,IAAI,EAAEI,KAAK,CAAC,CAAC;IACvD;EACJ;EACA;AACJ;AACA;EACI,SAASR,aAAaA,CAACW,KAAK,EAAE;IAC1B,IAAIxB,iBAAiB,CAACwB,KAAK,CAAC,EAAE;MAC1B;IACJ;IACA9B,OAAO,CAAC,KAAK,EAAE8B,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC;IAChC,IAAIX,kBAAkB,EAAE;MACpBA,kBAAkB,CAACU,KAAK,CAAC;IAC7B;EACJ;EACA,MAAME,cAAc,GAAGpC,OAAO,CAAC,MAAM2B,IAAI,CAACU,WAAW,CAAC;IAAEN,KAAK,EAAEA,KAAK,GAAGT,gBAAgB;IAAEgB,QAAQ,EAAER;EAAO,CAAC,CAAC,EAAE,CAACR,gBAAgB,EAAEK,IAAI,EAAEG,MAAM,EAAEC,KAAK,CAAC,CAAC;EACtJ,MAAMQ,QAAQ,GAAGvC,OAAO,CAAC,MAAM2B,IAAI,CAACU,WAAW,CAAC;IAAEN,KAAK;IAAEO,QAAQ,EAAER;EAAO,CAAC,CAAC,EAAE,CAACH,IAAI,EAAEG,MAAM,EAAEC,KAAK,CAAC,CAAC;EACpG;EACAhC,SAAS,CAAC,SAASyC,gBAAgBA,CAAA,EAAG;IAClC,IAAI,CAACb,IAAI,EAAE;MACP;IACJ;IACA;IACAA,IAAI,CAACc,OAAO,CAAC,CAAC;IACd,MAAM;MAAEC,OAAO,EAAEC;IAAO,CAAC,GAAGV,aAAa;IACzC,IAAI,CAACU,MAAM,EAAE;MACT;IACJ;IACAA,MAAM,CAACC,KAAK,GAAGR,cAAc,CAACQ,KAAK;IACnCD,MAAM,CAACE,MAAM,GAAGT,cAAc,CAACS,MAAM;IACrCF,MAAM,CAACG,KAAK,CAACF,KAAK,GAAG,GAAGG,IAAI,CAACC,KAAK,CAACT,QAAQ,CAACK,KAAK,CAAC,IAAI;IACtDD,MAAM,CAACG,KAAK,CAACD,MAAM,GAAG,GAAGE,IAAI,CAACC,KAAK,CAACT,QAAQ,CAACM,MAAM,CAAC,IAAI;IACxDF,MAAM,CAACG,KAAK,CAACG,UAAU,GAAG,QAAQ;IAClC,MAAMC,aAAa,GAAG;MAClBC,cAAc,EAAEvB,WAAW,GAAGhB,eAAe,CAACwC,YAAY,GAAGxC,eAAe,CAACyC,MAAM;MACnFC,aAAa,EAAEX,MAAM,CAACY,UAAU,CAAC,IAAI,EAAE;QAAEC,KAAK,EAAE;MAAM,CAAC,CAAC;MACxDjB,QAAQ,EAAEH;IACd,CAAC;IACD,IAAIf,gBAAgB,EAAE;MAClB6B,aAAa,CAACO,UAAU,GAAGpC,gBAAgB;IAC/C;IACA,MAAMqC,WAAW,GAAG/B,IAAI,CAACgC,MAAM,CAACT,aAAa,CAAC;IAC9C,MAAMU,WAAW,GAAGF,WAAW;IAC/BA,WAAW,CAACG,OAAO,CACdC,IAAI,CAAC,MAAM;MACZnB,MAAM,CAACG,KAAK,CAACG,UAAU,GAAG,EAAE;MAC5BxB,eAAe,CAAC,CAAC;IACrB,CAAC,CAAC,CACGsC,KAAK,CAACxC,aAAa,CAAC;IACzB,OAAO,MAAMf,iBAAiB,CAACoD,WAAW,CAAC;EAC/C,CAAC,EAAE,CAACvC,gBAAgB,EAAEM,IAAI,EAAEC,WAAW,EAAEQ,cAAc,EAAEG,QAAQ,CAAC,CAAC;EACnE,MAAME,OAAO,GAAG3C,WAAW,CAAC,MAAM;IAC9B,MAAM;MAAE4C,OAAO,EAAEC;IAAO,CAAC,GAAGV,aAAa;IACzC;AACR;AACA;AACA;IACQ,IAAIU,MAAM,EAAE;MACRA,MAAM,CAACC,KAAK,GAAG,CAAC;MAChBD,MAAM,CAACE,MAAM,GAAG,CAAC;IACrB;EACJ,CAAC,EAAE,EAAE,CAAC;EACN9C,SAAS,CAAC,MAAM0C,OAAO,EAAE,CAACA,OAAO,CAAC,CAAC;EACnC,OAAQ5C,IAAI,CAAC,QAAQ,EAAE;IAAEmE,SAAS,EAAE,GAAG5C,UAAU,UAAU;IAAE6C,GAAG,EAAE,KAAK;IAAEC,GAAG,EAAEhE,SAAS,CAAC8B,SAAS,EAAEC,aAAa,CAAC;IAAEa,KAAK,EAAE;MAClHqB,OAAO,EAAE,OAAO;MAChBC,UAAU,EAAE;IAChB,CAAC;IAAEC,QAAQ,EAAExC,eAAe,GAAGhC,IAAI,CAACS,UAAU,EAAE,CAAC,CAAC,CAAC,GAAG;EAAK,CAAC,CAAC;AACrE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}